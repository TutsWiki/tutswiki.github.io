<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="pandas, slide, dice, filter dataframe, numpy, matplotlib">
    <meta name="description" content="Here we get into serious slicing and dicing and learn how to filter dataframes in complicated ways, really fast.">
    <meta name="author" content="Chankey Pathak (@chankeypathak)">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <title>Chapter 3 - Filtering dataframes</title>
    <link href="/css/bootstrap-theme.css" rel="stylesheet">
    <link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/style-responsive.css" rel="stylesheet" />
    <link href="/css/monokai_sublime.css" rel="stylesheet" />

  </head>

  <body>
  
  <section id="container" class="">

      
      <header class="header black-bg">
            <div class="toggle-nav">
                <i class="fa fa-bars"></i>
                <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
            </div>

            
            <a href="/" class="logo"><img src="/img/tutswiki-logo.png" style="height: 40px; vertical-align: bottom;"></a>
            
            <div class="top-nav notification-row">
                
                <div class="hidden-xs nav-github pull-right">
                    <span rel="show-github" data-user="chankeypathak" data-repo="hugo" data-type="follow"></span>
                    <span rel="show-github" data-user="tutswiki" data-repo="source"></span>
                    <span rel="show-github" data-user="tutswiki" data-repo="source" data-type="fork"></span>
                </div>
            </div>

            <div class="nav title-row" id="top_menu">
                <h1 class="nav top-menu">Chapter 3 - Filtering dataframes</h1>
            </div>
      </header>
      


<aside>
    <div id="sidebar" class="nav-collapse">
        
        <ul class="sidebar-menu">
          
          
              

            <li class="sub-menu active">
            <a href="javascript:;" class="">
                
                
                <span>Pandas Cookbook</span>
                <span class="menu-arrow fa fa-angle-down"></span>
            </a>
                <ul class="sub open">
                    
                    <li><a href="/pandas-cookbook/chapter1">Chapter 1</a> </li>
                    
                    <li><a href="/pandas-cookbook/chapter2">Chapter 2</a> </li>
                    
                    <li class="active"><a href="/pandas-cookbook/chapter3">Chapter 3</a> </li>
                    
                    <li><a href="/pandas-cookbook/chapter4">Chapter 4</a> </li>
                    
                </ul>
              
              </li>
          
            <li> <a href="https://github.com/TutsWiki/source/issues" target="blank"><i class='fa fa-life-ring'></i> <span>Issues & Help</span></a> </li>
            
              <li><a href="https://github.com/TutsWiki/source/edit/master/content/tutorials/pandas%20cookbook/chapter3.md" target="blank"><i class='fa fa-edit'></i> Refine this Page</a> </li>
            
        </ul>
        
    </div>
</aside>



      
      <section id="main-content">
          <section class="wrapper">

              
                  
                      
                      
                          
                          
                          
                      
                      
                  
              

              <div class="row">
                  <div class="col-md-1">
                      
                      
                      <a class="navigation prev" href="/pandas-cookbook/chapter2">
                      <i class="fa fa-angle-left"></i>
                      </a>
                      
                      
                  </div>
                <div class="col-md-10">
                    <section class="panel">
                          
                              
                          
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 cse">
                                
                            </div>
                        </div>




<pre><code class="language-python"># The usual preamble
%matplotlib inline
import pandas as pd
import matplotlib.pyplot as plt
import numpy as np

# Make the graphs a bit prettier, and bigger
pd.set_option('display.mpl_style', 'default')
plt.rcParams['figure.figsize'] = (15, 5)


# This is necessary to show lots of columns in pandas 0.12. 
# Not necessary in pandas 0.13.
pd.set_option('display.width', 5000) 
pd.set_option('display.max_columns', 60)
</code></pre>

<p>Let&rsquo;s continue with our NYC 311 service requests example.</p>

<pre><code class="language-python">complaints = pd.read_csv('311-service-requests.csv')
</code></pre>

<h2 id="3-1-selecting-only-noise-complaints">3.1 Selecting only noise complaints</h2>

<p>I&rsquo;d like to know which borough has the most noise complaints. First, we&rsquo;ll take a look at the data to see what it looks like:</p>

<pre><code class="language-python">complaints[:5]
</code></pre>

<p>Output:</p>

<div class="output_html rendered_html output_subarea output_execute_result">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unique Key</th>
      <th>Created Date</th>
      <th>Closed Date</th>
      <th>Agency</th>
      <th>Agency Name</th>
      <th>Complaint Type</th>
      <th>Descriptor</th>
      <th>Location Type</th>
      <th>Incident Zip</th>
      <th>Incident Address</th>
      <th>Street Name</th>
      <th>Cross Street 1</th>
      <th>Cross Street 2</th>
      <th>Intersection Street 1</th>
      <th>Intersection Street 2</th>
      <th>Address Type</th>
      <th>City</th>
      <th>Landmark</th>
      <th>Facility Type</th>
      <th>Status</th>
      <th>Due Date</th>
      <th>Resolution Action Updated Date</th>
      <th>Community Board</th>
      <th>Borough</th>
      <th>X Coordinate (State Plane)</th>
      <th>Y Coordinate (State Plane)</th>
      <th>Park Facility Name</th>
      <th>Park Borough</th>
      <th>School Name</th>
      <th>School Number</th>
      <th>School Region</th>
      <th>School Code</th>
      <th>School Phone Number</th>
      <th>School Address</th>
      <th>School City</th>
      <th>School State</th>
      <th>School Zip</th>
      <th>School Not Found</th>
      <th>School or Citywide Complaint</th>
      <th>Vehicle Type</th>
      <th>Taxi Company Borough</th>
      <th>Taxi Pick Up Location</th>
      <th>Bridge Highway Name</th>
      <th>Bridge Highway Direction</th>
      <th>Road Ramp</th>
      <th>Bridge Highway Segment</th>
      <th>Garage Lot Name</th>
      <th>Ferry Direction</th>
      <th>Ferry Terminal Name</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> 26589651</td>
      <td> 10/31/2013 02:08:41 AM</td>
      <td>                    NaN</td>
      <td>  NYPD</td>
      <td>         New York City Police Department</td>
      <td> Noise - Street/Sidewalk</td>
      <td>                 Loud Talking</td>
      <td>     Street/Sidewalk</td>
      <td> 11432</td>
      <td> 90-03 169 STREET</td>
      <td>      169 STREET</td>
      <td>       90 AVENUE</td>
      <td>                        91 AVENUE</td>
      <td> NaN</td>
      <td> NaN</td>
      <td>   ADDRESS</td>
      <td>  JAMAICA</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td> Assigned</td>
      <td> 10/31/2013 10:08:41 AM</td>
      <td> 10/31/2013 02:35:17 AM</td>
      <td>    12 QUEENS</td>
      <td>    QUEENS</td>
      <td> 1042027</td>
      <td> 197389</td>
      <td> Unspecified</td>
      <td>    QUEENS</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.708275</td>
      <td>-73.791604</td>
      <td>  (40.70827532593202, -73.79160395779721)</td>
    </tr>
    <tr>
      <th>1</th>
      <td> 26593698</td>
      <td> 10/31/2013 02:01:04 AM</td>
      <td>                    NaN</td>
      <td>  NYPD</td>
      <td>         New York City Police Department</td>
      <td>         Illegal Parking</td>
      <td> Commercial Overnight Parking</td>
      <td>     Street/Sidewalk</td>
      <td> 11378</td>
      <td>        58 AVENUE</td>
      <td>       58 AVENUE</td>
      <td>        58 PLACE</td>
      <td>                        59 STREET</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> BLOCKFACE</td>
      <td>  MASPETH</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td>     Open</td>
      <td> 10/31/2013 10:01:04 AM</td>
      <td>                    NaN</td>
      <td>    05 QUEENS</td>
      <td>    QUEENS</td>
      <td> 1009349</td>
      <td> 201984</td>
      <td> Unspecified</td>
      <td>    QUEENS</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.721041</td>
      <td>-73.909453</td>
      <td> (40.721040535628305, -73.90945306791765)</td>
    </tr>
    <tr>
      <th>2</th>
      <td> 26594139</td>
      <td> 10/31/2013 02:00:24 AM</td>
      <td> 10/31/2013 02:40:32 AM</td>
      <td>  NYPD</td>
      <td>         New York City Police Department</td>
      <td>      Noise - Commercial</td>
      <td>             Loud Music/Party</td>
      <td> Club/Bar/Restaurant</td>
      <td> 10032</td>
      <td>    4060 BROADWAY</td>
      <td>        BROADWAY</td>
      <td> WEST 171 STREET</td>
      <td>                  WEST 172 STREET</td>
      <td> NaN</td>
      <td> NaN</td>
      <td>   ADDRESS</td>
      <td> NEW YORK</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td>   Closed</td>
      <td> 10/31/2013 10:00:24 AM</td>
      <td> 10/31/2013 02:39:42 AM</td>
      <td> 12 MANHATTAN</td>
      <td> MANHATTAN</td>
      <td> 1001088</td>
      <td> 246531</td>
      <td> Unspecified</td>
      <td> MANHATTAN</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.843330</td>
      <td>-73.939144</td>
      <td>  (40.84332975466513, -73.93914371913482)</td>
    </tr>
    <tr>
      <th>3</th>
      <td> 26595721</td>
      <td> 10/31/2013 01:56:23 AM</td>
      <td> 10/31/2013 02:21:48 AM</td>
      <td>  NYPD</td>
      <td>         New York City Police Department</td>
      <td>         Noise - Vehicle</td>
      <td>               Car/Truck Horn</td>
      <td>     Street/Sidewalk</td>
      <td> 10023</td>
      <td>   WEST 72 STREET</td>
      <td>  WEST 72 STREET</td>
      <td> COLUMBUS AVENUE</td>
      <td>                 AMSTERDAM AVENUE</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> BLOCKFACE</td>
      <td> NEW YORK</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td>   Closed</td>
      <td> 10/31/2013 09:56:23 AM</td>
      <td> 10/31/2013 02:21:10 AM</td>
      <td> 07 MANHATTAN</td>
      <td> MANHATTAN</td>
      <td>  989730</td>
      <td> 222727</td>
      <td> Unspecified</td>
      <td> MANHATTAN</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.778009</td>
      <td>-73.980213</td>
      <td>   (40.7780087446372, -73.98021349023975)</td>
    </tr>
    <tr>
      <th>4</th>
      <td> 26590930</td>
      <td> 10/31/2013 01:53:44 AM</td>
      <td>                    NaN</td>
      <td> DOHMH</td>
      <td> Department of Health and Mental Hygiene</td>
      <td>                  Rodent</td>
      <td> Condition Attracting Rodents</td>
      <td>          Vacant Lot</td>
      <td> 10027</td>
      <td>  WEST 124 STREET</td>
      <td> WEST 124 STREET</td>
      <td>    LENOX AVENUE</td>
      <td> ADAM CLAYTON POWELL JR BOULEVARD</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> BLOCKFACE</td>
      <td> NEW YORK</td>
      <td> NaN</td>
      <td>      NaN</td>
      <td>  Pending</td>
      <td> 11/30/2013 01:53:44 AM</td>
      <td> 10/31/2013 01:59:54 AM</td>
      <td> 10 MANHATTAN</td>
      <td> MANHATTAN</td>
      <td>  998815</td>
      <td> 233545</td>
      <td> Unspecified</td>
      <td> MANHATTAN</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.807691</td>
      <td>-73.947387</td>
      <td>  (40.80769092704951, -73.94738703491433)</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 52 columns</p>
</div>
</div>

<p>To get the noise complaints, we need to find the rows where the &ldquo;Complaint Type&rdquo; column is &ldquo;Noise - Street/Sidewalk&rdquo;. I&rsquo;ll show you how to do that, and then explain what&rsquo;s going on.</p>

<pre><code class="language-python">noise_complaints = complaints[complaints['Complaint Type'] == &quot;Noise - Street/Sidewalk&quot;]
noise_complaints[:3]
</code></pre>

<p>Output:</p>

<div class="output_html rendered_html output_subarea output_execute_result">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unique Key</th>
      <th>Created Date</th>
      <th>Closed Date</th>
      <th>Agency</th>
      <th>Agency Name</th>
      <th>Complaint Type</th>
      <th>Descriptor</th>
      <th>Location Type</th>
      <th>Incident Zip</th>
      <th>Incident Address</th>
      <th>Street Name</th>
      <th>Cross Street 1</th>
      <th>Cross Street 2</th>
      <th>Intersection Street 1</th>
      <th>Intersection Street 2</th>
      <th>Address Type</th>
      <th>City</th>
      <th>Landmark</th>
      <th>Facility Type</th>
      <th>Status</th>
      <th>Due Date</th>
      <th>Resolution Action Updated Date</th>
      <th>Community Board</th>
      <th>Borough</th>
      <th>X Coordinate (State Plane)</th>
      <th>Y Coordinate (State Plane)</th>
      <th>Park Facility Name</th>
      <th>Park Borough</th>
      <th>School Name</th>
      <th>School Number</th>
      <th>School Region</th>
      <th>School Code</th>
      <th>School Phone Number</th>
      <th>School Address</th>
      <th>School City</th>
      <th>School State</th>
      <th>School Zip</th>
      <th>School Not Found</th>
      <th>School or Citywide Complaint</th>
      <th>Vehicle Type</th>
      <th>Taxi Company Borough</th>
      <th>Taxi Pick Up Location</th>
      <th>Bridge Highway Name</th>
      <th>Bridge Highway Direction</th>
      <th>Road Ramp</th>
      <th>Bridge Highway Segment</th>
      <th>Garage Lot Name</th>
      <th>Ferry Direction</th>
      <th>Ferry Terminal Name</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0 </th>
      <td> 26589651</td>
      <td> 10/31/2013 02:08:41 AM</td>
      <td>                    NaN</td>
      <td> NYPD</td>
      <td> New York City Police Department</td>
      <td> Noise - Street/Sidewalk</td>
      <td>     Loud Talking</td>
      <td> Street/Sidewalk</td>
      <td> 11432</td>
      <td>    90-03 169 STREET</td>
      <td>      169 STREET</td>
      <td>        90 AVENUE</td>
      <td>    91 AVENUE</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> ADDRESS</td>
      <td>       JAMAICA</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td> Assigned</td>
      <td> 10/31/2013 10:08:41 AM</td>
      <td> 10/31/2013 02:35:17 AM</td>
      <td>        12 QUEENS</td>
      <td>        QUEENS</td>
      <td> 1042027</td>
      <td> 197389</td>
      <td> Unspecified</td>
      <td>        QUEENS</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.708275</td>
      <td>-73.791604</td>
      <td> (40.70827532593202, -73.79160395779721)</td>
    </tr>
    <tr>
      <th>16</th>
      <td> 26594086</td>
      <td> 10/31/2013 12:54:03 AM</td>
      <td> 10/31/2013 02:16:39 AM</td>
      <td> NYPD</td>
      <td> New York City Police Department</td>
      <td> Noise - Street/Sidewalk</td>
      <td> Loud Music/Party</td>
      <td> Street/Sidewalk</td>
      <td> 10310</td>
      <td> 173 CAMPBELL AVENUE</td>
      <td> CAMPBELL AVENUE</td>
      <td> HENDERSON AVENUE</td>
      <td> WINEGAR LANE</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> ADDRESS</td>
      <td> STATEN ISLAND</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td>   Closed</td>
      <td> 10/31/2013 08:54:03 AM</td>
      <td> 10/31/2013 02:07:14 AM</td>
      <td> 01 STATEN ISLAND</td>
      <td> STATEN ISLAND</td>
      <td>  952013</td>
      <td> 171076</td>
      <td> Unspecified</td>
      <td> STATEN ISLAND</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.636182</td>
      <td>-74.116150</td>
      <td>  (40.63618202176914, -74.1161500428337)</td>
    </tr>
    <tr>
      <th>25</th>
      <td> 26591573</td>
      <td> 10/31/2013 12:35:18 AM</td>
      <td> 10/31/2013 02:41:35 AM</td>
      <td> NYPD</td>
      <td> New York City Police Department</td>
      <td> Noise - Street/Sidewalk</td>
      <td>     Loud Talking</td>
      <td> Street/Sidewalk</td>
      <td> 10312</td>
      <td>   24 PRINCETON LANE</td>
      <td>  PRINCETON LANE</td>
      <td>    HAMPTON GREEN</td>
      <td>     DEAD END</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> ADDRESS</td>
      <td> STATEN ISLAND</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td>   Closed</td>
      <td> 10/31/2013 08:35:18 AM</td>
      <td> 10/31/2013 01:45:17 AM</td>
      <td> 03 STATEN ISLAND</td>
      <td> STATEN ISLAND</td>
      <td>  929577</td>
      <td> 140964</td>
      <td> Unspecified</td>
      <td> STATEN ISLAND</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.553421</td>
      <td>-74.196743</td>
      <td> (40.55342078716953, -74.19674315017886)</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 52 columns</p>
</div>
</div>

<p>If you look at noise_complaints, you&rsquo;ll see that this worked, and it only contains complaints with the right complaint type. But how does this work? Let&rsquo;s deconstruct it into two pieces</p>

<pre><code class="language-python">complaints['Complaint Type'] == &quot;Noise - Street/Sidewalk&quot;
</code></pre>

<p>Output:</p>

<pre><code class="language-bash">0      True
1     False
2     False
3     False
4     False
5     False
6     False
7     False
8     False
9     False
10    False
11    False
12    False
13    False
14    False
...
111054     True
111055    False
111056    False
111057    False
111058    False
111059     True
111060    False
111061    False
111062    False
111063    False
111064    False
111065    False
111066     True
111067    False
111068    False
Name: Complaint Type, Length: 111069, dtype: bool
</code></pre>

<p>This is a big array of Trues and Falses, one for each row in our dataframe. When we index our dataframe with this array, we get just the rows where our boolean array evaluated to True. It&rsquo;s important to note that for row filtering by a boolean array the length of our dataframe&rsquo;s index must be the same length as the boolean array used for filtering.</p>

<p>You can also combine more than one condition with the <code>&amp;</code> operator like this:</p>

<pre><code class="language-python">is_noise = complaints['Complaint Type'] == &quot;Noise - Street/Sidewalk&quot;
in_brooklyn = complaints['Borough'] == &quot;BROOKLYN&quot;
complaints[is_noise &amp; in_brooklyn][:5]
</code></pre>

<p>Output:</p>

<div class="output_html rendered_html output_subarea output_execute_result">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unique Key</th>
      <th>Created Date</th>
      <th>Closed Date</th>
      <th>Agency</th>
      <th>Agency Name</th>
      <th>Complaint Type</th>
      <th>Descriptor</th>
      <th>Location Type</th>
      <th>Incident Zip</th>
      <th>Incident Address</th>
      <th>Street Name</th>
      <th>Cross Street 1</th>
      <th>Cross Street 2</th>
      <th>Intersection Street 1</th>
      <th>Intersection Street 2</th>
      <th>Address Type</th>
      <th>City</th>
      <th>Landmark</th>
      <th>Facility Type</th>
      <th>Status</th>
      <th>Due Date</th>
      <th>Resolution Action Updated Date</th>
      <th>Community Board</th>
      <th>Borough</th>
      <th>X Coordinate (State Plane)</th>
      <th>Y Coordinate (State Plane)</th>
      <th>Park Facility Name</th>
      <th>Park Borough</th>
      <th>School Name</th>
      <th>School Number</th>
      <th>School Region</th>
      <th>School Code</th>
      <th>School Phone Number</th>
      <th>School Address</th>
      <th>School City</th>
      <th>School State</th>
      <th>School Zip</th>
      <th>School Not Found</th>
      <th>School or Citywide Complaint</th>
      <th>Vehicle Type</th>
      <th>Taxi Company Borough</th>
      <th>Taxi Pick Up Location</th>
      <th>Bridge Highway Name</th>
      <th>Bridge Highway Direction</th>
      <th>Road Ramp</th>
      <th>Bridge Highway Segment</th>
      <th>Garage Lot Name</th>
      <th>Ferry Direction</th>
      <th>Ferry Terminal Name</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>31 </th>
      <td> 26595564</td>
      <td> 10/31/2013 12:30:36 AM</td>
      <td>                    NaN</td>
      <td> NYPD</td>
      <td> New York City Police Department</td>
      <td> Noise - Street/Sidewalk</td>
      <td> Loud Music/Party</td>
      <td> Street/Sidewalk</td>
      <td> 11236</td>
      <td>           AVENUE J</td>
      <td>        AVENUE J</td>
      <td>    EAST 80 STREET</td>
      <td> EAST 81 STREET</td>
      <td>           NaN</td>
      <td>           NaN</td>
      <td>    BLOCKFACE</td>
      <td> BROOKLYN</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td>   Open</td>
      <td> 10/31/2013 08:30:36 AM</td>
      <td>                    NaN</td>
      <td> 18 BROOKLYN</td>
      <td> BROOKLYN</td>
      <td> 1008937</td>
      <td> 170310</td>
      <td> Unspecified</td>
      <td> BROOKLYN</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.634104</td>
      <td>-73.911055</td>
      <td> (40.634103775951736, -73.91105541883589)</td>
    </tr>
    <tr>
      <th>49 </th>
      <td> 26595553</td>
      <td> 10/31/2013 12:05:10 AM</td>
      <td> 10/31/2013 02:43:43 AM</td>
      <td> NYPD</td>
      <td> New York City Police Department</td>
      <td> Noise - Street/Sidewalk</td>
      <td>     Loud Talking</td>
      <td> Street/Sidewalk</td>
      <td> 11225</td>
      <td> 25 LEFFERTS AVENUE</td>
      <td> LEFFERTS AVENUE</td>
      <td> WASHINGTON AVENUE</td>
      <td> BEDFORD AVENUE</td>
      <td>           NaN</td>
      <td>           NaN</td>
      <td>      ADDRESS</td>
      <td> BROOKLYN</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td> Closed</td>
      <td> 10/31/2013 08:05:10 AM</td>
      <td> 10/31/2013 01:29:29 AM</td>
      <td> 09 BROOKLYN</td>
      <td> BROOKLYN</td>
      <td>  995366</td>
      <td> 180388</td>
      <td> Unspecified</td>
      <td> BROOKLYN</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.661793</td>
      <td>-73.959934</td>
      <td>   (40.6617931276793, -73.95993363978067)</td>
    </tr>
    <tr>
      <th>109</th>
      <td> 26594653</td>
      <td> 10/30/2013 11:26:32 PM</td>
      <td> 10/31/2013 12:18:54 AM</td>
      <td> NYPD</td>
      <td> New York City Police Department</td>
      <td> Noise - Street/Sidewalk</td>
      <td> Loud Music/Party</td>
      <td> Street/Sidewalk</td>
      <td> 11222</td>
      <td>                NaN</td>
      <td>             NaN</td>
      <td>               NaN</td>
      <td>            NaN</td>
      <td> DOBBIN STREET</td>
      <td> NORMAN STREET</td>
      <td> INTERSECTION</td>
      <td> BROOKLYN</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td> Closed</td>
      <td> 10/31/2013 07:26:32 AM</td>
      <td> 10/31/2013 12:18:54 AM</td>
      <td> 01 BROOKLYN</td>
      <td> BROOKLYN</td>
      <td>  996925</td>
      <td> 203271</td>
      <td> Unspecified</td>
      <td> BROOKLYN</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.724600</td>
      <td>-73.954271</td>
      <td> (40.724599563793525, -73.95427134534344)</td>
    </tr>
    <tr>
      <th>236</th>
      <td> 26591992</td>
      <td> 10/30/2013 10:02:58 PM</td>
      <td> 10/30/2013 10:23:20 PM</td>
      <td> NYPD</td>
      <td> New York City Police Department</td>
      <td> Noise - Street/Sidewalk</td>
      <td>     Loud Talking</td>
      <td> Street/Sidewalk</td>
      <td> 11218</td>
      <td>      DITMAS AVENUE</td>
      <td>   DITMAS AVENUE</td>
      <td>               NaN</td>
      <td>            NaN</td>
      <td>           NaN</td>
      <td>           NaN</td>
      <td>      LATLONG</td>
      <td> BROOKLYN</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td> Closed</td>
      <td> 10/31/2013 06:02:58 AM</td>
      <td> 10/30/2013 10:23:20 PM</td>
      <td> 01 BROOKLYN</td>
      <td> BROOKLYN</td>
      <td>  991895</td>
      <td> 171051</td>
      <td> Unspecified</td>
      <td> BROOKLYN</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.636169</td>
      <td>-73.972455</td>
      <td>  (40.63616876563881, -73.97245504682485)</td>
    </tr>
    <tr>
      <th>370</th>
      <td> 26594167</td>
      <td> 10/30/2013 08:38:25 PM</td>
      <td> 10/30/2013 10:26:28 PM</td>
      <td> NYPD</td>
      <td> New York City Police Department</td>
      <td> Noise - Street/Sidewalk</td>
      <td> Loud Music/Party</td>
      <td> Street/Sidewalk</td>
      <td> 11218</td>
      <td>   126 BEVERLY ROAD</td>
      <td>    BEVERLY ROAD</td>
      <td>     CHURCH AVENUE</td>
      <td>  EAST 2 STREET</td>
      <td>           NaN</td>
      <td>           NaN</td>
      <td>      ADDRESS</td>
      <td> BROOKLYN</td>
      <td> NaN</td>
      <td> Precinct</td>
      <td> Closed</td>
      <td> 10/31/2013 04:38:25 AM</td>
      <td> 10/30/2013 10:26:28 PM</td>
      <td> 12 BROOKLYN</td>
      <td> BROOKLYN</td>
      <td>  990144</td>
      <td> 173511</td>
      <td> Unspecified</td>
      <td> BROOKLYN</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> Unspecified</td>
      <td> N</td>
      <td>NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> NaN</td>
      <td> 40.642922</td>
      <td>-73.978762</td>
      <td>   (40.6429222774404, -73.97876175474585)</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 52 columns</p>
</div>
</div>

<p>Or if we just wanted a few columns:</p>

<pre><code class="language-python">complaints[is_noise &amp; in_brooklyn][['Complaint Type', 'Borough', 'Created Date', 'Descriptor']][:10]
</code></pre>

<p>Output:</p>

<div class="output_html rendered_html output_subarea output_execute_result">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Complaint Type</th>
      <th>Borough</th>
      <th>Created Date</th>
      <th>Descriptor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>31  </th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/31/2013 12:30:36 AM</td>
      <td> Loud Music/Party</td>
    </tr>
    <tr>
      <th>49  </th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/31/2013 12:05:10 AM</td>
      <td>     Loud Talking</td>
    </tr>
    <tr>
      <th>109 </th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/30/2013 11:26:32 PM</td>
      <td> Loud Music/Party</td>
    </tr>
    <tr>
      <th>236 </th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/30/2013 10:02:58 PM</td>
      <td>     Loud Talking</td>
    </tr>
    <tr>
      <th>370 </th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/30/2013 08:38:25 PM</td>
      <td> Loud Music/Party</td>
    </tr>
    <tr>
      <th>378 </th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/30/2013 08:32:13 PM</td>
      <td>     Loud Talking</td>
    </tr>
    <tr>
      <th>656 </th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/30/2013 06:07:39 PM</td>
      <td> Loud Music/Party</td>
    </tr>
    <tr>
      <th>1251</th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/30/2013 03:04:51 PM</td>
      <td>     Loud Talking</td>
    </tr>
    <tr>
      <th>5416</th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/29/2013 10:07:02 PM</td>
      <td>     Loud Talking</td>
    </tr>
    <tr>
      <th>5584</th>
      <td> Noise - Street/Sidewalk</td>
      <td> BROOKLYN</td>
      <td> 10/29/2013 08:15:59 PM</td>
      <td> Loud Music/Party</td>
    </tr>
  </tbody>
</table>
<p>10 rows × 4 columns</p>
</div>
</div>

<h2 id="3-2-a-digression-about-numpy-arrays">3.2 A digression about numpy arrays</h2>

<p>On the inside, the type of a column is <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.html">pd.Series</a></p>

<pre><code class="language-python">pd.Series([1,2,3])
</code></pre>

<p>Output:</p>

<pre><code class="language-bash">0    1
1    2
2    3
dtype: int64
</code></pre>

<p>and pandas Series are internally <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html">numpy arrays</a>. If you add <code>.values</code> to the end of any Series, you&rsquo;ll get its internal numpy array</p>

<pre><code class="language-python">np.array([1,2,3])
</code></pre>

<p>Output:</p>

<pre><code class="language-bash">array([1, 2, 3])
</code></pre>

<pre><code class="language-python">pd.Series([1,2,3]).values
</code></pre>

<p>Output:</p>

<pre><code class="language-bash">array([1, 2, 3])
</code></pre>

<p>So this binary-array-selection business is actually something that works with any numpy array:</p>

<pre><code class="language-python">arr = np.array([1,2,3])
arr != 2
</code></pre>

<p>Output:</p>

<pre><code class="language-bash">array([ True, False,  True], dtype=bool)
</code></pre>

<pre><code class="language-python">arr[arr != 2]
</code></pre>

<p>Output:</p>

<pre><code class="language-bash">array([1, 3])
</code></pre>

<h2 id="3-3-so-which-borough-has-the-most-noise-complaints">3.3 So, which borough has the most noise complaints?</h2>

<pre><code class="language-python">is_noise = complaints['Complaint Type'] == &quot;Noise - Street/Sidewalk&quot;
noise_complaints = complaints[is_noise]
noise_complaints['Borough'].value_counts()
</code></pre>

<p>Output:</p>

<pre><code class="language-bash">MANHATTAN        917
BROOKLYN         456
BRONX            292
QUEENS           226
STATEN ISLAND     36
Unspecified        1
dtype: int64
</code></pre>

<p>It&rsquo;s Manhattan! But what if we wanted to divide by the total number of complaints, to make it make a bit more sense? That would be easy too:</p>

<pre><code class="language-python">noise_complaint_counts = noise_complaints['Borough'].value_counts()
complaint_counts = complaints['Borough'].value_counts()
noise_complaint_counts / complaint_counts
</code></pre>

<p>Output:</p>

<pre><code class="language-bash">BRONX            0
BROOKLYN         0
MANHATTAN        0
QUEENS           0
STATEN ISLAND    0
Unspecified      0
dtype: int64
</code></pre>

<p>Oops, why was that zero? That&rsquo;s no good. This is because of integer division in Python 2. Let&rsquo;s fix it, by converting complaint_counts into an array of floats.</p>

<pre><code class="language-python">noise_complaint_counts / complaint_counts.astype(float)
</code></pre>

<p>Output:</p>

<pre><code class="language-bash">BRONX            0.014833
BROOKLYN         0.013864
MANHATTAN        0.037755
QUEENS           0.010143
STATEN ISLAND    0.007474
Unspecified      0.000141
dtype: float64
</code></pre>

<p>Now let&rsquo;s plot it!</p>

<pre><code class="language-python">(noise_complaint_counts / complaint_counts.astype(float)).plot(kind='bar')
</code></pre>

<p>Output:</p>

<div>
<img src="/img/noise_complaints_plot.png" alt="Plot which borough has the most noise complaints" />
</div>

<p>So Manhattan really does complain more about noise than the other boroughs! Neat.</p>



                    </div>
                    </section>
                    <div style="font-size: medium; font-style: italic; text-align: right;">
                      <span style="font-size: medium; font-style: italic; text-align: left;">Last revision: May 12, 2017</span>
                    </div>

                    </div>

                <div class="col-md-1">
                    
                    
                    <a class="navigation next" href="/pandas-cookbook/chapter4">
                        <i class="fa fa-angle-right"> </i>
                    </a>
                    
                    
                </div>
              </div>
              
          </section>
      </section>
     
  </section>
  
    
    <script src="/js/jquery-2.1.1.min.js"></script>
    <script src="/js/jquery.scrollTo.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/scripts.js"></script>
    <script async defer id="github-bjs" src="/js/buttons.js"></script>
    
  </body>
</html>

