<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.69.2" />
    <meta name="description" content="Here we get into serious slicing and dicing and learn how to filter dataframes in complicated ways, really fast.">
	<meta name="author" content="Chankey Pathak">
	<meta name="keywords" content="pandas,slide,dice,filter dataframe,numpy,matplotlib">
    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
	<meta property="og:title" content="Chapter 3 - Filtering dataframes" />
	<meta property="og:description" content="Here we get into serious slicing and dicing and learn how to filter dataframes in complicated ways, really fast." />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="http://tutswiki.com/pandas-cookbook/chapter3/" />
	<meta property="og:locale" content="en" />
    <title>Chapter 3 - Filtering dataframes - TutsWiki Beta</title>
    
    
    <link href="/css/nucleus.css?1595485593" rel="stylesheet">
    <link href="/css/font-awesome.min.css?1595485593" rel="stylesheet">
    <link href="/css/hybrid.css?1595485593" rel="stylesheet">
    <link href="/css/featherlight.min.css?1595485593" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1595485593" rel="stylesheet">
    <link href="/css/auto-complete.css?1595485593" rel="stylesheet">
    <link href="/css/theme.css?1595485593" rel="stylesheet">
    <link href="/css/hugo-theme.css?1595485593" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1595485593"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-12858299-25"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-12858299-25');
</script>

  </head>
  <body class="" data-url="/pandas-cookbook/chapter3/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="/"><img src="https://tutswiki.com/img/tutswiki-logo.png" style="width:70%"/></a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1595485593"></script>
<script type="text/javascript" src="/js/auto-complete.js?1595485593"></script>
<script type="text/javascript">
    
        var baseurl = '\/';
    
</script>
<script type="text/javascript" src="/js/search.js?1595485593"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/blog/" title="Blog" class="dd-item 
        
        
        
        ">
      <a href="/blog/">
          <b></b>Blog
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/environment-passing-in-clojure" title="Environment Passing in Clojure" class="dd-item ">
        <a href="/environment-passing-in-clojure/">
        Environment Passing in Clojure
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/how-to-fix-sudo-node-command-not-found-error" title="How to fix sudo node command not found error" class="dd-item ">
        <a href="/how-to-fix-sudo-node-command-not-found-error/">
        sudo and node
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/yet-another-lousy-monad-tutorial" title="Yet another lousy monad tutorial" class="dd-item ">
        <a href="/yet-another-lousy-monad-tutorial/">
        Yet another lousy monad tutorial
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ruby-enumerable" title="A Deeper Look at Ruby&#39;s Enumerable" class="dd-item ">
        <a href="/ruby-enumerable/">
        A Deeper Look at Ruby&#39;s Enumerable
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rest-api-in-clojure" title="A REST API in Clojure" class="dd-item ">
        <a href="/rest-api-in-clojure/">
        A REST API in Clojure
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/abstract-classes-and-interfaces-in-python" title="Abstract classes and interfaces in Python" class="dd-item ">
        <a href="/abstract-classes-and-interfaces-in-python/">
        Abstract classes and interfaces in Python
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/deep-learning-cardiovascular-imaging" title="How Deep Learning Helped Reducing Variability in Cardiovascular Imaging" class="dd-item ">
        <a href="/deep-learning-cardiovascular-imaging/">
        Deep Learning helped reducing variability in Cardiovascular Imaging
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/google-engineers-boycott-security-tool-military" title="Google Engineers Boycott Against Security Tool for Military" class="dd-item ">
        <a href="/google-engineers-boycott-security-tool-military/">
        Google engineers boycott
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/nodejs-google-app-engine" title="How to deploy Node.js app on Google App Engine" class="dd-item ">
        <a href="/nodejs-google-app-engine/">
        Node.js on Google App Engine
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/angular6-features" title="What&#39;s new in Angular 6 (Features List)" class="dd-item ">
        <a href="/angular6-features/">
        Angular 6 features
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/github-alternatives" title="GitHub Alternatives (Free, Paid, Self-Hosted)" class="dd-item ">
        <a href="/github-alternatives/">
        Github alternatives
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/what-is-the-use-of-yield-in-python" title="What is the use of yield in Python?" class="dd-item ">
        <a href="/what-is-the-use-of-yield-in-python/">
        What is the use of yield in Python?
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/append-vs-extend-python" title="Difference between append and extend in Python" class="dd-item ">
        <a href="/append-vs-extend-python/">
        Difference between append and extend in Python
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/print-same-line-python" title="How to print on same line with print in Python" class="dd-item ">
        <a href="/print-same-line-python/">
        How to print on same line with print in Python
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/read-write-config-files-in-python" title="Writing and Reading config files in Python" class="dd-item ">
        <a href="/read-write-config-files-in-python/">
        Writing and Reading config files in Python
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/run-module-as-script-python" title="How to run a Python module as script?" class="dd-item ">
        <a href="/run-module-as-script-python/">
        How to run a Python module as script?
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/if-name-main-in-python" title="What is if __name__ == &#34;__main__&#34; in Python?" class="dd-item ">
        <a href="/if-name-main-in-python/">
        What is if __name__ == &#34;__main__&#34; in Python?
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/pandas-cookbook/" title="Pandas Cookbook" class="dd-item 
        parent
        
        
        ">
      <a href="/pandas-cookbook/">
          <b></b>Pandas Cookbook
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/pandas-cookbook/chapter1" title="Chapter 1 - Reading from a CSV" class="dd-item ">
        <a href="/pandas-cookbook/chapter1/">
        Chapter 1
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/pandas-cookbook/chapter2" title="Chapter 2 - Selecting and finding desired data" class="dd-item ">
        <a href="/pandas-cookbook/chapter2/">
        Chapter 2
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/pandas-cookbook/chapter3" title="Chapter 3 - Filtering dataframes" class="dd-item active">
        <a href="/pandas-cookbook/chapter3/">
        Chapter 3
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/pandas-cookbook/chapter4" title="Chapter 4 - Groupby and Aggregate" class="dd-item ">
        <a href="/pandas-cookbook/chapter4/">
        Chapter 4
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/pandas-cookbook/chapter5" title="Chapter 5 - Web scraping with Pandas" class="dd-item ">
        <a href="/pandas-cookbook/chapter5/">
        Chapter 5
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/pandas-cookbook/chapter6" title="Chapter 6 - String Operations" class="dd-item ">
        <a href="/pandas-cookbook/chapter6/">
        Chapter 6
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/pandas-cookbook/chapter7" title="Chapter 7 - Cleanup messy data" class="dd-item ">
        <a href="/pandas-cookbook/chapter7/">
        Chapter 7
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/pandas-cookbook/chapter8" title="Chapter 8 - Parsing Unix timestamps" class="dd-item ">
        <a href="/pandas-cookbook/chapter8/">
        Chapter 8
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/TutsWiki/source/"><i class='fa fa-fw fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/TutsWiki/source/graphs/contributors"><i class='fa fa-fw fa-bullhorn'></i> Credits</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/TutsWiki/"><i class='fa fa-fw fa-facebook'></i> Facebook</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <center>
    
    <a class="github-button" href="https://github.com/TutsWiki/source/" data-icon="octicon-star" data-show-count="true" aria-label="Star TutsWiki/source on GitHub">Star</a>

    
    <a class="github-button" href="https://github.com/TutsWiki/source/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork TutsWiki/source on GitHub">Fork</a>

    <p>Built by Community with <a href="https://github.com/TutsWiki/source/graphs/contributors"><i class="fa fa-heart"></i></a>
</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/TutsWiki/source/edit/master/content/pandas%20cookbook/chapter3.md" target="blank">
                      <i class="fa fa-code-fork"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>TutsWiki Beta</a> > <a href='/pandas-cookbook/'>Pandas Cookbook</a> > Chapter 3 - Filtering dataframes
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#31-selecting-only-noise-complaints">3.1 Selecting only noise complaints</a></li>
    <li><a href="#32-a-digression-about-numpy-arrays">3.2 A digression about numpy arrays</a></li>
    <li><a href="#33-so-which-borough-has-the-most-noise-complaints">3.3 So, which borough has the most noise complaints?</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Chapter 3 - Filtering dataframes</h1>
          

        


<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># The usual preamble</span>
<span style="color:#f92672">%</span>matplotlib inline
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

<span style="color:#75715e"># Make the graphs a bit prettier, and bigger</span>
pd<span style="color:#f92672">.</span>set_option(<span style="color:#e6db74">&#39;display.mpl_style&#39;</span>, <span style="color:#e6db74">&#39;default&#39;</span>)
plt<span style="color:#f92672">.</span>rcParams[<span style="color:#e6db74">&#39;figure.figsize&#39;</span>] <span style="color:#f92672">=</span> (<span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">5</span>)


<span style="color:#75715e"># This is necessary to show lots of columns in pandas 0.12. </span>
<span style="color:#75715e"># Not necessary in pandas 0.13.</span>
pd<span style="color:#f92672">.</span>set_option(<span style="color:#e6db74">&#39;display.width&#39;</span>, <span style="color:#ae81ff">5000</span>) 
pd<span style="color:#f92672">.</span>set_option(<span style="color:#e6db74">&#39;display.max_columns&#39;</span>, <span style="color:#ae81ff">60</span>)
</code></pre></div><p>Let&rsquo;s continue with our NYC 311 service requests example.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">complaints <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;311-service-requests.csv&#39;</span>)
</code></pre></div><!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="31-selecting-only-noise-complaints">3.1 Selecting only noise complaints</h2>
<p>I&rsquo;d like to know which borough has the most noise complaints. First, we&rsquo;ll take a look at the data to see what it looks like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">complaints[:<span style="color:#ae81ff">5</span>]
</code></pre></div><p>Output:</p>
<!-- raw HTML omitted -->
<p>To get the noise complaints, we need to find the rows where the &ldquo;Complaint Type&rdquo; column is &ldquo;Noise - Street/Sidewalk&rdquo;. I&rsquo;ll show you how to do that, and then explain what&rsquo;s going on.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">noise_complaints <span style="color:#f92672">=</span> complaints[complaints[<span style="color:#e6db74">&#39;Complaint Type&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Noise - Street/Sidewalk&#34;</span>]
noise_complaints[:<span style="color:#ae81ff">3</span>]
</code></pre></div><p>Output:</p>
<!-- raw HTML omitted -->
<p>If you look at noise_complaints, you&rsquo;ll see that this worked, and it only contains complaints with the right complaint type. But how does this work? Let&rsquo;s deconstruct it into two pieces</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">complaints[<span style="color:#e6db74">&#39;Complaint Type&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Noise - Street/Sidewalk&#34;</span>
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ae81ff">0</span>      True
<span style="color:#ae81ff">1</span>     False
<span style="color:#ae81ff">2</span>     False
<span style="color:#ae81ff">3</span>     False
<span style="color:#ae81ff">4</span>     False
<span style="color:#ae81ff">5</span>     False
<span style="color:#ae81ff">6</span>     False
<span style="color:#ae81ff">7</span>     False
<span style="color:#ae81ff">8</span>     False
<span style="color:#ae81ff">9</span>     False
<span style="color:#ae81ff">10</span>    False
<span style="color:#ae81ff">11</span>    False
<span style="color:#ae81ff">12</span>    False
<span style="color:#ae81ff">13</span>    False
<span style="color:#ae81ff">14</span>    False
...
<span style="color:#ae81ff">111054</span>     True
<span style="color:#ae81ff">111055</span>    False
<span style="color:#ae81ff">111056</span>    False
<span style="color:#ae81ff">111057</span>    False
<span style="color:#ae81ff">111058</span>    False
<span style="color:#ae81ff">111059</span>     True
<span style="color:#ae81ff">111060</span>    False
<span style="color:#ae81ff">111061</span>    False
<span style="color:#ae81ff">111062</span>    False
<span style="color:#ae81ff">111063</span>    False
<span style="color:#ae81ff">111064</span>    False
<span style="color:#ae81ff">111065</span>    False
<span style="color:#ae81ff">111066</span>     True
<span style="color:#ae81ff">111067</span>    False
<span style="color:#ae81ff">111068</span>    False
Name: Complaint Type, Length: 111069, dtype: bool
</code></pre></div><p>This is a big array of Trues and Falses, one for each row in our dataframe. When we index our dataframe with this array, we get just the rows where our boolean array evaluated to True. It&rsquo;s important to note that for row filtering by a boolean array the length of our dataframe&rsquo;s index must be the same length as the boolean array used for filtering.</p>
<p>You can also combine more than one condition with the <code>&amp;</code> operator like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">is_noise <span style="color:#f92672">=</span> complaints[<span style="color:#e6db74">&#39;Complaint Type&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Noise - Street/Sidewalk&#34;</span>
in_brooklyn <span style="color:#f92672">=</span> complaints[<span style="color:#e6db74">&#39;Borough&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;BROOKLYN&#34;</span>
complaints[is_noise <span style="color:#f92672">&amp;</span> in_brooklyn][:<span style="color:#ae81ff">5</span>]
</code></pre></div><p>Output:</p>
<!-- raw HTML omitted -->
<p>Or if we just wanted a few columns:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">complaints[is_noise <span style="color:#f92672">&amp;</span> in_brooklyn][[<span style="color:#e6db74">&#39;Complaint Type&#39;</span>, <span style="color:#e6db74">&#39;Borough&#39;</span>, <span style="color:#e6db74">&#39;Created Date&#39;</span>, <span style="color:#e6db74">&#39;Descriptor&#39;</span>]][:<span style="color:#ae81ff">10</span>]
</code></pre></div><p>Output:</p>
<!-- raw HTML omitted -->
<h2 id="32-a-digression-about-numpy-arrays">3.2 A digression about numpy arrays</h2>
<p>On the inside, the type of a column is <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.html">pd.Series</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>])
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">1</span>
<span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">2</span>
<span style="color:#ae81ff">2</span>    <span style="color:#ae81ff">3</span>
dtype: int64
</code></pre></div><p>and pandas Series are internally <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html">numpy arrays</a>. If you add <code>.values</code> to the end of any Series, you&rsquo;ll get its internal numpy array</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>])
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">array<span style="color:#f92672">([</span>1, 2, 3<span style="color:#f92672">])</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>])<span style="color:#f92672">.</span>values
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">array<span style="color:#f92672">([</span>1, 2, 3<span style="color:#f92672">])</span>
</code></pre></div><p>So this binary-array-selection business is actually something that works with any numpy array:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">arr <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>])
arr <span style="color:#f92672">!=</span> <span style="color:#ae81ff">2</span>
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">array<span style="color:#f92672">([</span> True, False,  True<span style="color:#f92672">]</span>, dtype<span style="color:#f92672">=</span>bool<span style="color:#f92672">)</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">arr[arr <span style="color:#f92672">!=</span> <span style="color:#ae81ff">2</span>]
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">array<span style="color:#f92672">([</span>1, 3<span style="color:#f92672">])</span>
</code></pre></div><h2 id="33-so-which-borough-has-the-most-noise-complaints">3.3 So, which borough has the most noise complaints?</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">is_noise <span style="color:#f92672">=</span> complaints[<span style="color:#e6db74">&#39;Complaint Type&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Noise - Street/Sidewalk&#34;</span>
noise_complaints <span style="color:#f92672">=</span> complaints[is_noise]
noise_complaints[<span style="color:#e6db74">&#39;Borough&#39;</span>]<span style="color:#f92672">.</span>value_counts()
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">MANHATTAN        <span style="color:#ae81ff">917</span>
BROOKLYN         <span style="color:#ae81ff">456</span>
BRONX            <span style="color:#ae81ff">292</span>
QUEENS           <span style="color:#ae81ff">226</span>
STATEN ISLAND     <span style="color:#ae81ff">36</span>
Unspecified        <span style="color:#ae81ff">1</span>
dtype: int64
</code></pre></div><p>It&rsquo;s Manhattan! But what if we wanted to divide by the total number of complaints, to make it make a bit more sense? That would be easy too:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">noise_complaint_counts <span style="color:#f92672">=</span> noise_complaints[<span style="color:#e6db74">&#39;Borough&#39;</span>]<span style="color:#f92672">.</span>value_counts()
complaint_counts <span style="color:#f92672">=</span> complaints[<span style="color:#e6db74">&#39;Borough&#39;</span>]<span style="color:#f92672">.</span>value_counts()
noise_complaint_counts <span style="color:#f92672">/</span> complaint_counts
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BRONX            <span style="color:#ae81ff">0</span>
BROOKLYN         <span style="color:#ae81ff">0</span>
MANHATTAN        <span style="color:#ae81ff">0</span>
QUEENS           <span style="color:#ae81ff">0</span>
STATEN ISLAND    <span style="color:#ae81ff">0</span>
Unspecified      <span style="color:#ae81ff">0</span>
dtype: int64
</code></pre></div><p>Oops, why was that zero? That&rsquo;s no good. This is because of integer division in Python 2. Let&rsquo;s fix it, by converting complaint_counts into an array of floats.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">noise_complaint_counts <span style="color:#f92672">/</span> complaint_counts<span style="color:#f92672">.</span>astype(float)
</code></pre></div><p>Output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BRONX            0.014833
BROOKLYN         0.013864
MANHATTAN        0.037755
QUEENS           0.010143
STATEN ISLAND    0.007474
Unspecified      0.000141
dtype: float64
</code></pre></div><p>Now let&rsquo;s plot it!</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">(noise_complaint_counts <span style="color:#f92672">/</span> complaint_counts<span style="color:#f92672">.</span>astype(float))<span style="color:#f92672">.</span>plot(kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bar&#39;</span>)
</code></pre></div><p>Output:</p>
<!-- raw HTML omitted -->
<p>So Manhattan really does complain more about noise than the other boroughs! Neat.</p>



<br />
<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
<a class="a2a_dd" href="https://www.addtoany.com/share"></a>
<a class="a2a_button_reddit"></a>
<a class="a2a_button_hacker_news"></a>
<a class="a2a_button_twitter"></a>
<a class="a2a_button_facebook"></a>
<a class="a2a_button_linkedin"></a>
<a class="a2a_button_google_plus"></a>
</div>
<script async src="https://static.addtoany.com/menu/page.js"></script>

<br />

        
        </div>
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/pandas-cookbook/chapter2" title="Chapter 2 - Selecting and finding desired data"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/pandas-cookbook/chapter4" title="Chapter 4 - Groupby and Aggregate" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1595485593"></script>
    <script src="/js/perfect-scrollbar.min.js?1595485593"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1595485593"></script>
    <script src="/js/jquery.sticky.js?1595485593"></script>
    <script src="/js/featherlight.min.js?1595485593"></script>
    <script src="/js/html5shiv-printshiv.min.js?1595485593"></script>
    <script src="/js/highlight.pack.js?1595485593"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1595485593"></script>
    <script src="/js/learn.js?1595485593"></script>
    <script src="/js/hugo-learn.js?1595485593"></script>

    <link href="/mermaid/mermaid.css?1595485593" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1595485593"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

